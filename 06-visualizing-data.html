<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en" data-bs-theme="auto"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><title>Data Management with Python for Ecologists: Visualizing Data</title><meta name="viewport" content="width=device-width, initial-scale=1"><script src="assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="assets/styles.css"><script src="assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="favicons/dc/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="favicons/dc/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="favicons/dc/favicon-16x16.png"><link rel="manifest" href="favicons/dc/site.webmanifest"><link rel="mask-icon" href="favicons/dc/safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="black"></head><body>
    <header id="top" class="navbar navbar-expand-md top-nav data"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img id="dc-logo" alt="Data Carpentry" src="assets/images/data-logo.svg"><span class="badge text-bg-info">
          <abbr title="This lesson is in the beta phase, which means that it is ready for teaching by instructors outside of the original author team.">
            <a href="https://docs.carpentries.org/resources/curriculum/lesson-life-cycle.html" class="external-link alert-link">
              <i aria-hidden="true" class="icon" data-feather="alert-circle" style="border-radius: 5px"></i>
              Beta
            </a>
            <span class="visually-hidden">This lesson is in the beta phase, which means that it is ready for teaching by instructors outside of the original author team.</span>
          </abbr>
        </span>

      </div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text"><li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul></li>
      </div>

      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Learner View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1"><li><button class="dropdown-item" type="button" onclick="window.location.href='instructor/06-visualizing-data.html';">Instructor View</button></li>
        </ul></div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav data" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Data Carpentry" src="assets/images/data-logo-sm.svg"></div>
    <div class="lesson-title-md">
      Data Management with Python for Ecologists
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Search the All In One page" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0"><li class="nav-item">
          <span class="lesson-title">
            Data Management with Python for Ecologists
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="reference.html#glossary">Glossary</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="profiles.html">Learner Profiles</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown"><li><a class="dropdown-item" href="reference.html">References</a></li>
          </ul></li>
      </ul></div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Search the All In One page"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="aio.html" role="button" aria-label="Search the All In One page">Search the All In One page</a>
  </div><!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  Data Management with Python for Ecologists
</div>

<aside class="col-md-12 lesson-progress"><div style="width: 83%" class="percentage">
    83%
  </div>
  <div class="progress data">
    <div class="progress-bar data" role="progressbar" style="width: 83%" aria-valuenow="83" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text"><li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul></li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Learner View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="instructor/06-visualizing-data.html">Instructor View</a>
                      </div>
                    </div>
                  </div><!--/div.accordion-item-->
                </div><!--/div.accordion-flush-->
              </div><!--div.sidenav-view-selector -->
            </div><!--/div.col -->

            <hr></div><!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Setup</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="01-introducing-python.html">1. Introducing Python</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="02-introducing-pandas.html">2. Introducing pandas</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="03-accessing-and-filtering-data.html">3. Accessing and Filtering Data</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="04-aggregating-data.html">4. Aggregating Data</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="05-combining-data.html">5. Combining Dataframes</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlushcurrent">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-headingcurrent">
      <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapsecurrent" aria-expanded="true" aria-controls="flush-collapsecurrent">
        <span class="visually-hidden">Current Chapter</span>
        <span class="current-chapter">
        6. Visualizing Data
        </span>
      </button>
    </div><!--/div.accordion-header-->

    <div id="flush-collapsecurrent" class="accordion-collapse collapse show" aria-labelledby="flush-headingcurrent" data-bs-parent="#accordionFlushcurrent">
      <div class="accordion-body">
        <ul><li><a href="#re-introducing-plotly">Re-introducing plotly</a></li>
<li><a href="#choosing-colors">Choosing colors</a></li>
<li><a href="#sorting-data">Sorting data</a></li>
<li><a href="#adding-plot-and-axis-titles">Adding plot and axis titles</a></li>
<li><a href="#create-a-faceted-plot">Create a faceted plot</a></li>
<li><a href="#making-a-box-plot">Making a box plot</a></li>
        </ul></div><!--/div.accordion-body-->
    </div><!--/div.accordion-collapse-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width"><div class="accordion accordion-flush lesson-resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="lesson-resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul><li>
                        <a href="key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="reference.html#glossary">Glossary</a>
                      </li>
                      <li>
                        <a href="profiles.html">Learner Profiles</a>
                      </li>
                      <li><a href="reference.html">References</a></li>
                    </ul></div>
                </div>
              </div>
            </div>
            <hr class="half-width lesson-resources"><a href="aio.html">See all in one page</a>


            <hr class="d-none d-sm-block d-md-none"><div class="d-grid gap-1">

            </div>
          </div><!-- /div.accordion -->
        </div><!-- /div.sidebar-inner -->
      </nav></div><!-- /div.sidebar -->
  </div><!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-instructor.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <nav class="lesson-content mx-md-4" aria-label="Previous and Next Chapter"><!-- content for small screens --><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="05-combining-data.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="index.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="05-combining-data.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previous: Combining Dataframes
        </a>
        <a class="chapter-link float-end" href="index.html" rel="next">
          Home
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
      <hr></nav><main id="main-content" class="main-content"><div class="container lesson-content">
        <h1>Visualizing Data</h1>
        <p>Last updated on 2025-07-03 |

        <a href="https://github.com/adamancer/python-ecology-lesson-alt/edit/main/episodes/06-visualizing-data.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>



        <div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>

        

<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul><li>How can we create different types of plots using Python?</li>
<li>How can we style plots?</li>
<li>How can we add descriptive titles to plots and axes?</li>
</ul></div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul><li>Review processes for reading, modifying, and combining
dataframes</li>
<li>Make and customize scatter, box, and bar plots</li>
</ul></div>
</div>
</div>
</div>
</div>
<p>We’ll begin by loading and preparing the data we’d like to plot. This
will include operations introduced in previous lessons, including
reading CSVs into dataframes, merging dataframes, sorting a dataframe,
and removing records that include null values. We’ll begin by importing
pandas:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span></code></pre>
</div>
<p>Next we’ll load the surveys dataset using
<code>pd.read_csv()</code>:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a>surveys <span class="op">=</span> pd.read_csv(<span class="st">"data/surveys.csv"</span>)</span></code></pre>
</div>
<p>Now we want to take a quick look at the surveys dataset. Since we’re
going to be plotting data, we need to consider how we want to handle any
null values in the dataset. The <code>info()</code> method provides an
overview, including counts of non-null values, that we can use to assess
the dataset.</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a>surveys.info()</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 35549 entries, 0 to 35548
Data columns (total 9 columns):
 #   Column           Non-Null Count  Dtype
---  ------           --------------  -----
 0   record_id        35549 non-null  int64
 1   month            35549 non-null  int64
 2   day              35549 non-null  int64
 3   year             35549 non-null  int64
 4   plot_id          35549 non-null  int64
 5   species_id       34786 non-null  object
 6   sex              33038 non-null  object
 7   hindfoot_length  31438 non-null  float64
 8   weight           32283 non-null  float64
dtypes: float64(2), int64(5), object(2)
memory usage: 2.4+ MB
</code></pre>
</div>
<p>There are 35,459 records in the table. Four columns—species_id, sex,
hindfoot_length, and weight—include null values, that is, they contain
fewer non-null values than there are rows in the dataframe. We can us
<code>fillna()</code> to replace null values where it makes sense to do
so. For example, some specimens do not specify as sex. We can fill those
values in with the letter U (for unknown):</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>surveys[<span class="st">"sex"</span>] <span class="op">=</span> surveys[<span class="st">"sex"</span>].fillna(<span class="st">"U"</span>)</span></code></pre>
</div>
<p>The other three columns that contain null values are all required for
the plots we will create below. This means that we can use
<code>dropna()</code> to drop all rows where any column is null:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a>surveys <span class="op">=</span> surveys.dropna()</span></code></pre>
</div>
<p>Now we we’ll merge the main surveys dataframe with two other datasets
containing additional information:</p>
<ul><li>
<strong>species.csv</strong> provides the genus and species
corresponding to species_id</li>
<li>
<strong>plots.csv</strong> provides the plot type corresponding to
plot_id</li>
</ul><p>We will read each CSV and merge it into the main dataframe:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a>species <span class="op">=</span> pd.read_csv(<span class="st">"data/species.csv"</span>)</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>plots <span class="op">=</span> pd.read_csv(<span class="st">"data/plots.csv"</span>)</span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a>surveys <span class="op">=</span> surveys.merge(species, how<span class="op">=</span><span class="st">"left"</span>).merge(plots, how<span class="op">=</span><span class="st">"left"</span>)</span></code></pre>
</div>
<div id="chaining" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="chaining" class="callout-inner">
<h3 class="callout-title">Chaining</h3>
<div class="callout-content">
<p>The previous cell performs two merges in the same line of code.
Performing multiple operations on the same object in a single line of
code is called chaining.</p>
</div>
</div>
</div>
<p>We now have a dataframe that includes all observations from the
Portal dataset that specify a species, weight, and hindfoot length, as
well as descriptive metadata about each species and plot type. The taxa
column contains the general type of animal. If we look at the unique
values in this column–</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a>surveys[<span class="st">"taxa"</span>].unique()</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>array(['Rodent'], dtype=object)</code></pre>
</div>
<p>–we can see that all remaining observations are of rodents. In honor
of this, we will assign our dataframe to a new variable:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a>rodents <span class="op">=</span> surveys</span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a>rodents.sample(<span class="dv">5</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code></code></pre>
</div>
<style>
  table.dataframe { display: block; overflow-x: auto; white-space: nowrap; }
  table.dataframe tbody tr:hover { background-color: #ccffff !important; }
  table.dataframe tr:nth-child(even) { background-color: #f5f5f5; }
  table.dataframe th { text-align: right; font-weight: bold; }
  table.dataframe td { text-align: right; }
</style><table border="1" class="table dataframe"><thead><tr style="text-align: right;"><th>
</th>
<th>
record_id
</th>
<th>
month
</th>
<th>
day
</th>
<th>
year
</th>
<th>
plot_id
</th>
<th>
species_id
</th>
<th>
sex
</th>
<th>
hindfoot_length
</th>
<th>
weight
</th>
<th>
genus
</th>
<th>
species
</th>
<th>
taxa
</th>
<th>
plot_type
</th>
</tr></thead><tbody><tr><th>
17654
</th>
<td>
21298
</td>
<td>
12
</td>
<td>
15
</td>
<td>
1993
</td>
<td>
14
</td>
<td>
DM
</td>
<td>
M
</td>
<td>
36.0
</td>
<td>
44.0
</td>
<td>
Dipodomys
</td>
<td>
merriami
</td>
<td>
Rodent
</td>
<td>
Control
</td>
</tr><tr><th>
23181
</th>
<td>
27267
</td>
<td>
11
</td>
<td>
22
</td>
<td>
1997
</td>
<td>
3
</td>
<td>
DO
</td>
<td>
M
</td>
<td>
36.0
</td>
<td>
45.0
</td>
<td>
Dipodomys
</td>
<td>
ordii
</td>
<td>
Rodent
</td>
<td>
Long-term Krat Exclosure
</td>
</tr><tr><th>
14306
</th>
<td>
17443
</td>
<td>
4
</td>
<td>
26
</td>
<td>
1990
</td>
<td>
4
</td>
<td>
DM
</td>
<td>
F
</td>
<td>
36.0
</td>
<td>
53.0
</td>
<td>
Dipodomys
</td>
<td>
merriami
</td>
<td>
Rodent
</td>
<td>
Control
</td>
</tr><tr><th>
15426
</th>
<td>
18727
</td>
<td>
5
</td>
<td>
14
</td>
<td>
1991
</td>
<td>
8
</td>
<td>
DM
</td>
<td>
M
</td>
<td>
33.0
</td>
<td>
41.0
</td>
<td>
Dipodomys
</td>
<td>
merriami
</td>
<td>
Rodent
</td>
<td>
Control
</td>
</tr><tr><th>
13563
</th>
<td>
16628
</td>
<td>
11
</td>
<td>
4
</td>
<td>
1989
</td>
<td>
12
</td>
<td>
OT
</td>
<td>
F
</td>
<td>
21.0
</td>
<td>
27.0
</td>
<td>
Onychomys
</td>
<td>
torridus
</td>
<td>
Rodent
</td>
<td>
Control
</td>
</tr></tbody></table><p>Finally, we’ll save the rodents dataframe to a file that we can load
directly in the future if needed:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a>rodents.to_csv(<span class="st">"data/rodents.csv"</span>, index<span class="op">=</span><span class="va">False</span>)</span></code></pre>
</div>
<p>Now we’re ready to plot.</p>
<section><h2 class="section-heading" id="re-introducing-plotly">Re-introducing plotly<a class="anchor" aria-label="anchor" href="#re-introducing-plotly"></a></h2>
<hr class="half-width"><p>We’ve already worked with plotly a little in previous lessons, but we
haven’t provided a comprehensive introduction. Plotly is a data
visualization package for Python that allows us to create customizable,
interactive plots of a variety of different types. Plotly makes plots
that are:</p>
<ul><li>
<strong>Customizable.</strong> Allows the appearance of plots to be
extensively modified.</li>
<li>
<strong>Interactive.</strong> Pan and zoom across plots, or hover
over elements to get additional information about them.</li>
<li>
<strong>Flexible.</strong> Many different plot types can be created,
often with only a few lines of code. Because plotly uses similar syntax
for each plot type, it is also easy to quickly change plot types to get
a different perspective on a dataset.</li>
<li>
<strong>Embeddable.</strong> Interactive plots can be embedded on
websites using ploty’s JavaScript library.</li>
</ul><div id="other-plotting-libraries" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="other-plotting-libraries" class="callout-inner">
<h3 class="callout-title">Other plotting libraries</h3>
<div class="callout-content">
<p>The R community has largely coalesced around gg2plot for plotting. In
contrast, the Python community has no clear consensus pick and makes use
of a number of data visualization packages. Some other commonly used
packages include:</p>
<ul><li><a href="https://bokeh.org/" class="external-link">Bokeh</a></li>
<li><a href="https://matplotlib.org/" class="external-link">Matplotlib</a></li>
<li><a href="https://seaborn.pydata.org/" class="external-link">seaborn</a></li>
<li><a href="https://altair-viz.github.io/" class="external-link">Vega-Altair</a></li>
</ul><p>The functionality of this packages overlaps to a large degree, and
which one to use depends in large part on personal preference.</p>
</div>
</div>
</div>
<p>Plotly has two main ways of making plots:</p>
<ul><li>
<code>plotly.express</code> provides a simplified interface for
quickly building and customizing plots</li>
<li>
<code>plotly.graph_objects</code> uses a more complex interface to
provide more granular control over the contents of a plot</li>
</ul><p>We will use <code>plotly.express</code> in this lesson.</p>
<p>We’ll begin by reproducing the scatter plot from the <a href="03-accessing-and-filtering-data.html#showing-data-on-a-plot">end
of lesson 3</a>, which included weight on the x axis and hindfoot length
on the y axis. Likely pandas, the developers of
<code>plotly.express</code> have a preferred alias, px, that we will use
when we import <code>plotly.express</code>:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="im">import</span> plotly.express <span class="im">as</span> px</span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a>px.scatter(rodents, x<span class="op">=</span><span class="st">"weight"</span>, y<span class="op">=</span><span class="st">"hindfoot_length"</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code></code></pre>
</div>
<embed src="files/fig-a5bc67ed89866863a9a8945a8141239c.html" width="760" height="570"><p>Before diving into the content of this plot, let’s take a quick look
at the interactive elements plotly makes available. When we hover over a
plotly plot, a toolbar appears in the upper right corner. Each icon on
the toolbar is a widget that allows us to interact with the plot. By
default, the toolbar includes the following widgets:</p>
<ul><li>The camera allows us to save the current view as a PNG file</li>
<li>The next four widgets are toggles that control how click-and-drag
affects the plot. Only one can be active at a time.
<ul><li>The magnifying glass enables drawing a box to zoom</li>
<li>The crossing arrows enable panning</li>
<li>The dotted box enables drawing a box to select data</li>
<li>The dotted lasso enables drawing an arbitrary shape to to select
data</li>
</ul></li>
<li>The plus box allows us to zoom in</li>
<li>The minus box allows us to zoom out</li>
<li>The crossing arrows autoscale the plot to show all adata</li>
<li>The house resets the plot to the original view</li>
</ul><p>When we hover over a data point, we get a tooltip that shows
information about that point.</p>
<p>Now let’s think about the plot itself.</p>
<div id="challenge1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Challenge</h3>
<div class="callout-content">
<p>What are some limitations to the plot above? Think about how the data
itself is presented as well as the general appearance of the plot.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<p>Some issues with the plot include the following:</p>
<ul><li>All points are the same color</li>
<li>Large number of overlapping points, making it difficult to
understand how data is distributed</li>
<li>Axis labels include underscores and lack units</li>
<li>No plot title</li>
</ul><p>Any others?</p>
</div>
</div>
</div>
</div>
<p>One issue with the plot is that many of the points in the dataframe
overlap, making it difficult to get a feel for how the data is
distributed. Does it cluster in places? Is it evenly distributed? We
really can’t tell.</p>
<p>We can mitigate this issue in part by making the points
semitransparent using the opacity keyword argument. We’ll use a value of
0.2, which means the points are mostly transparent.</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a>px.scatter(rodents, x<span class="op">=</span><span class="st">"weight"</span>, y<span class="op">=</span><span class="st">"hindfoot_length"</span>, opacity<span class="op">=</span><span class="fl">0.2</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code></code></pre>
</div>
<embed src="files/fig-e6e8b7846f1f5308785022397604b063.html" width="760" height="570"><p>With the points now partially transparent, the places where they
overlap are more obvious, and we can see several clusters. To get a
better sense of what those clusters might be, let’s add some color to
the plot.</p>
<p>At the end of lesson 4, we colored this scatter plot based on the
species_id column. This revealed that several of the clusters reflected
the species of rodent observed. But the use of species_id was
problematic in other ways. For one, there are so many different species
that colors ended up being re-used. For another, the species codes are
not legible to people who are not intimately familiar with this
dataset.</p>
<p>With those concerns in mind, let’s use genus for color instead. Genus
information wasn’t available in lesson 4, but we can use it now now that
we’ve merged the surveys and species dataframes.</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a>px.scatter(rodents, x<span class="op">=</span><span class="st">"weight"</span>, y<span class="op">=</span><span class="st">"hindfoot_length"</span>, color<span class="op">=</span><span class="st">"genus"</span>, opacity<span class="op">=</span><span class="fl">0.2</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code></code></pre>
</div>
<embed src="files/fig-9c621cbf03e5d76575c93439a4277a21.html" width="760" height="570"></embed></embed></embed></section><section><h2 class="section-heading" id="choosing-colors">Choosing colors<a class="anchor" aria-label="anchor" href="#choosing-colors"></a></h2>
<hr class="half-width"><p>One concern when making plots is to make sure they are legible to as
broad an audience as possible. Clear, informative labels are one way to
do this. Color is another.</p>
<p>Plotly makes a number of color palettes available via its color
module. Because we are working with categorical data, we will use a
<em>qualitative</em> palette, which consists of a list of discrete
colors. Other palette types are also available. For example, plots
showing a range of values might benefit from using a <em>sequential</em>
or <em>diverging</em> color scheme, which use a continuous range of
colors (for example, blue to red for a heat map).</p>
<p>Qualitative palettes are available under
<code>px.colors.qualitative</code>. We can view the available plaettes
using the swatches function:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a>px.colors.qualitative.swatches()</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code></code></pre>
</div>
<embed src="files/fig-20548c05560600010e3e88783aacdd86.html" width="760" height="570"><p>In the spirit of effective communication with a wide audience, we
will use <code>px.colors.qualitative.Safe</code>, a colorblind-safe
palette. Because we will be using the same palette for the rest of the
lesson, we will store the palette as a variable:</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a>colors <span class="op">=</span> px.colors.qualitative.Safe</span></code></pre>
</div>
<p>In addition to simplifying the code for future plots a bit, storing
the palette as a variable also allows us to quickly change the color
scheme for all our plots at once if needed.</p>
<p>Let’s apply the safe colors to our scatter plot:</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a>px.scatter(</span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a>    rodents,</span>
<span id="cb22-3"><a href="#cb22-3" tabindex="-1"></a>    x<span class="op">=</span><span class="st">"weight"</span>,</span>
<span id="cb22-4"><a href="#cb22-4" tabindex="-1"></a>    y<span class="op">=</span><span class="st">"hindfoot_length"</span>,</span>
<span id="cb22-5"><a href="#cb22-5" tabindex="-1"></a>    color<span class="op">=</span><span class="st">"genus"</span>,</span>
<span id="cb22-6"><a href="#cb22-6" tabindex="-1"></a>    opacity<span class="op">=</span><span class="fl">0.2</span>,</span>
<span id="cb22-7"><a href="#cb22-7" tabindex="-1"></a>    color_discrete_sequence<span class="op">=</span>colors,</span>
<span id="cb22-8"><a href="#cb22-8" tabindex="-1"></a>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code></code></pre>
</div>
<embed src="files/fig-349b125e7900fc69cfa30682b78779c0.html" width="760" height="570"></embed></embed></section><section><h2 class="section-heading" id="sorting-data">Sorting data<a class="anchor" aria-label="anchor" href="#sorting-data"></a></h2>
<hr class="half-width"><p>Take a look at the legend of the plot. The genera from the dataset
are all listed, but they are in no apparent order. This makes it
difficult for anyone looking at the plot to quickly pick out a given
genus. We can alphabetize the legend to make it more readable. To do so,
we can use the category_order keyword argument.</p>
<p>This argument requires a <code>dict</code>. Recall that a
<code>dict</code> is a mapping of keys to values defined using curly
braces. The <code>dict</code> passed to category_orders maps a column
name from the dataframe to a list of values in the preferred order.</p>
<p>One approach to creating an alphabetical list would be to simply
build the list manually. That would work well enough here, where we have
only a handful of values, but quickly becomes unwiedly for larger
datasets. Instead, we will used the built-in <code>sorted()</code>
function to create a sorted list of values in the genus column. Because
we will be using the same order in all following plots, we will store
the dict with the sorted values in a variable that we can refer to
whenever we need to and can change if needed.</p>
<div id="challenge2" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Challenge</h3>
<div class="callout-content">
<p>Create the <code>dict</code> needed for category_order. The
<code>dict</code> should map the column name, <code>genus</code>, to an
ordered list of unique values from that column.</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a>vals <span class="op">=</span> rodents[<span class="st">"genus"</span>]</span>
<span id="cb24-2"><a href="#cb24-2" tabindex="-1"></a>unique <span class="op">=</span> vals.unique()</span>
<span id="cb24-3"><a href="#cb24-3" tabindex="-1"></a>ordered <span class="op">=</span> <span class="bu">sorted</span>(unique)</span>
<span id="cb24-4"><a href="#cb24-4" tabindex="-1"></a>cat_order <span class="op">=</span> {<span class="st">"genus"</span>: ordered}</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<p>In addition to the approach used in the challenge, we can create the
<code>dict</code> we need with a single line of code:</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a>cat_order <span class="op">=</span> {<span class="st">"genus"</span>: <span class="bu">sorted</span>(rodents[<span class="st">"genus"</span>].unique())}</span></code></pre>
</div>
<p>That variable can now be passed to the category_orders keyword
argument, producing a new version of the plot with an alphabetical
legend.</p>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a>px.scatter(</span>
<span id="cb26-2"><a href="#cb26-2" tabindex="-1"></a>    rodents,</span>
<span id="cb26-3"><a href="#cb26-3" tabindex="-1"></a>    x<span class="op">=</span><span class="st">"weight"</span>,</span>
<span id="cb26-4"><a href="#cb26-4" tabindex="-1"></a>    y<span class="op">=</span><span class="st">"hindfoot_length"</span>,</span>
<span id="cb26-5"><a href="#cb26-5" tabindex="-1"></a>    color<span class="op">=</span><span class="st">"genus"</span>,</span>
<span id="cb26-6"><a href="#cb26-6" tabindex="-1"></a>    opacity<span class="op">=</span><span class="fl">0.2</span>,</span>
<span id="cb26-7"><a href="#cb26-7" tabindex="-1"></a>    color_discrete_sequence<span class="op">=</span>colors,</span>
<span id="cb26-8"><a href="#cb26-8" tabindex="-1"></a>    category_orders<span class="op">=</span>cat_order,</span>
<span id="cb26-9"><a href="#cb26-9" tabindex="-1"></a>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code></code></pre>
</div>
<embed src="files/fig-933d2518a110bd65ab5ebc96e3dcfc7c.html" width="760" height="570"><p>Note that the colors in the plot have also changed. Colors are
assigned based on the same category order used by the legend.</p>
</embed></section><section><h2 class="section-heading" id="adding-plot-and-axis-titles">Adding plot and axis titles<a class="anchor" aria-label="anchor" href="#adding-plot-and-axis-titles"></a></h2>
<hr class="half-width"><p>By default, plotly uses the column names from the dataframe to label
the axes of a plot. Here, the axis labels are adequate but would benefit
from removing the underscore and including units. We can use the labels
keyword argument to assign human-readable labels to our plto.</p>
<p>We will turn again to a <code>dict</code> for this, which we will use
to map the underlying column names to preferred display values:</p>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a>labels <span class="op">=</span> {</span>
<span id="cb28-2"><a href="#cb28-2" tabindex="-1"></a>    <span class="st">"hindfoot_length"</span>: <span class="st">"Hindfoot length (mm)"</span>,</span>
<span id="cb28-3"><a href="#cb28-3" tabindex="-1"></a>    <span class="st">"genus"</span>: <span class="st">"Genus"</span>,</span>
<span id="cb28-4"><a href="#cb28-4" tabindex="-1"></a>    <span class="st">"weight"</span>: <span class="st">"Weight (g)"</span></span>
<span id="cb28-5"><a href="#cb28-5" tabindex="-1"></a>}</span></code></pre>
</div>
<p>We can then update the plot itself using the title and labels keyword
arguments:</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" tabindex="-1"></a>px.scatter(</span>
<span id="cb29-2"><a href="#cb29-2" tabindex="-1"></a>    rodents,</span>
<span id="cb29-3"><a href="#cb29-3" tabindex="-1"></a>    x<span class="op">=</span><span class="st">"weight"</span>,</span>
<span id="cb29-4"><a href="#cb29-4" tabindex="-1"></a>    y<span class="op">=</span><span class="st">"hindfoot_length"</span>,</span>
<span id="cb29-5"><a href="#cb29-5" tabindex="-1"></a>    color<span class="op">=</span><span class="st">"genus"</span>,</span>
<span id="cb29-6"><a href="#cb29-6" tabindex="-1"></a>    opacity<span class="op">=</span><span class="fl">0.2</span>,</span>
<span id="cb29-7"><a href="#cb29-7" tabindex="-1"></a>    color_discrete_sequence<span class="op">=</span>colors,</span>
<span id="cb29-8"><a href="#cb29-8" tabindex="-1"></a>    category_orders<span class="op">=</span>cat_order,</span>
<span id="cb29-9"><a href="#cb29-9" tabindex="-1"></a>    title<span class="op">=</span><span class="st">"Rodent size by genus"</span>,</span>
<span id="cb29-10"><a href="#cb29-10" tabindex="-1"></a>    labels<span class="op">=</span>labels,</span>
<span id="cb29-11"><a href="#cb29-11" tabindex="-1"></a>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code></code></pre>
</div>
<embed src="files/fig-25169cdf2c7196dc94ea79f6aadba526.html" width="760" height="570"></embed></section><section><h2 class="section-heading" id="create-a-faceted-plot">Create a faceted plot<a class="anchor" aria-label="anchor" href="#create-a-faceted-plot"></a></h2>
<hr class="half-width"><p>Even with the semitransparent points, there is a good deal of overlap
among the data on this plot, particularly in the lower left part. It may
be useful to plot each genus separately to see if anyting interesting is
being obscured. We could do so using some of the techniques we’ve
already covered. For example, we could filter the dataframe by genus and
create a separate plots for each.</p>
<p>Plotly provides a simpler approach called faceting. A facet is a type
of filter, and a faceted plot includes a separate subplot for each
unique value. In plotly, we can create a faceted plot using the
facet_col keyword argument. This argument produces a separate subplot
for each unique value in the specified column. The subplots are arranged
in a single row.</p>
<p>The plots we have created so far have not specified dimensions, but
we will need to consider the size of the faceted plot. Because this plot
includes a number of subplots, it may appear cramped unless it is quite
wide. We can use the height and width keyword arguments to set the size
of the plot. Each of these arguments requires an integer specifying a
size in pixels.</p>
<p>Let’s update our plot to facet it by genus and make it 1400 pixels
wide by 400 pixels tall:</p>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" tabindex="-1"></a>px.scatter(</span>
<span id="cb31-2"><a href="#cb31-2" tabindex="-1"></a>    rodents,</span>
<span id="cb31-3"><a href="#cb31-3" tabindex="-1"></a>    x<span class="op">=</span><span class="st">"weight"</span>,</span>
<span id="cb31-4"><a href="#cb31-4" tabindex="-1"></a>    y<span class="op">=</span><span class="st">"hindfoot_length"</span>,</span>
<span id="cb31-5"><a href="#cb31-5" tabindex="-1"></a>    color<span class="op">=</span><span class="st">"genus"</span>,</span>
<span id="cb31-6"><a href="#cb31-6" tabindex="-1"></a>    opacity<span class="op">=</span><span class="fl">0.2</span>,</span>
<span id="cb31-7"><a href="#cb31-7" tabindex="-1"></a>    color_discrete_sequence<span class="op">=</span>colors,</span>
<span id="cb31-8"><a href="#cb31-8" tabindex="-1"></a>    category_orders<span class="op">=</span>cat_order,</span>
<span id="cb31-9"><a href="#cb31-9" tabindex="-1"></a>    title<span class="op">=</span><span class="st">"Rodent size by genus"</span>,</span>
<span id="cb31-10"><a href="#cb31-10" tabindex="-1"></a>    labels<span class="op">=</span>labels,</span>
<span id="cb31-11"><a href="#cb31-11" tabindex="-1"></a>    facet_col<span class="op">=</span><span class="st">"genus"</span>,</span>
<span id="cb31-12"><a href="#cb31-12" tabindex="-1"></a>    width<span class="op">=</span><span class="dv">1400</span>,</span>
<span id="cb31-13"><a href="#cb31-13" tabindex="-1"></a>    height<span class="op">=</span><span class="dv">400</span>,</span>
<span id="cb31-14"><a href="#cb31-14" tabindex="-1"></a>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code></code></pre>
</div>
<embed src="files/fig-7af8a7c1bc6df4beb06c9a47f54800e5.html" width="760" height="570"><div id="row-facets" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="row-facets" class="callout-inner">
<h3 class="callout-title">Row facets</h3>
<div class="callout-content">
<p>The facet_col argument produces a single row of subplots. There is
another argument, facet_row, that places each subplot in a separate row
instead. Column and row facets can even be combined, for example, to
produce a grid of subplots with genus as columns and sex as rows.</p>
</div>
</div>
</div>
</embed></section><section><h2 class="section-heading" id="making-a-box-plot">Making a box plot<a class="anchor" aria-label="anchor" href="#making-a-box-plot"></a></h2>
<hr class="half-width"><p>We briefly discussed box plots (also known as box-and-whisker plots)
in <a href="04-aggregating-data.html#visualizing-groups-and-statistics">lesson
4</a> as part of the discussion of summary statistics. Box plots are an
effective way to visualize the distribution of data. Plotly uses the
<code>px.box()</code> method to generate them.</p>
<p>Some issues raised about the plot created during the earlier
lesson—including the arbitrary order in which data was plotted, the
repeated colors, and the inclusion of species with no data—have already
been addressed above. We can integrate them into the box plot using the
same approaches that we used for the scatter plots previously. Let’s
create a box plot of hindfoot length by genus using the same color and
ordering rules we defined earlier:</p>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" tabindex="-1"></a>px.box(</span>
<span id="cb33-2"><a href="#cb33-2" tabindex="-1"></a>    rodents,</span>
<span id="cb33-3"><a href="#cb33-3" tabindex="-1"></a>    x<span class="op">=</span><span class="st">"genus"</span>,</span>
<span id="cb33-4"><a href="#cb33-4" tabindex="-1"></a>    y<span class="op">=</span><span class="st">"hindfoot_length"</span>,</span>
<span id="cb33-5"><a href="#cb33-5" tabindex="-1"></a>    color<span class="op">=</span><span class="st">"genus"</span>,</span>
<span id="cb33-6"><a href="#cb33-6" tabindex="-1"></a>    color_discrete_sequence<span class="op">=</span>colors,</span>
<span id="cb33-7"><a href="#cb33-7" tabindex="-1"></a>    category_orders<span class="op">=</span>cat_order,</span>
<span id="cb33-8"><a href="#cb33-8" tabindex="-1"></a>    title<span class="op">=</span><span class="st">"Rodent hindfoot length by genus"</span>,</span>
<span id="cb33-9"><a href="#cb33-9" tabindex="-1"></a>    labels<span class="op">=</span>labels,</span>
<span id="cb33-10"><a href="#cb33-10" tabindex="-1"></a>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code></code></pre>
</div>
<embed src="files/fig-88a734bc811c5eb1714bc2bec0cd0a92.html" width="760" height="570"><p>We now have a box plot with colors corresponding to the scatter plots
above, with an alphabetically ordered x axis and legend.</p>
<p>There are other aspects of the box plot that we may want to tweak.
We’ll start with a concern about how the data is being represented. By
default, ploty’s box plots show individual points only for outliers,
that is, points that plot outside the upper and lower fences. This works
well enough for normally distributed data but can obscure patterns for
more complex distributions. And indeed, some genera, like
<em>Dipodomys</em>, show a large number of outliers on the box pot and
multiple clusters of data on the scatter plot. How might we update the
box plot to better convey these distributions?</p>
<p>The <code>px.box()</code> method includes a keyword argument, points,
that allows us to change how the underlying data is displayed. It
accepts three values:</p>
<ul><li>
<em>outliers</em> only shows the outliers (default)</li>
<li>
<em>all</em> shows all points</li>
<li>
<em>None</em> shows no points</li>
</ul><p>Let’s try updating the box plot to show all the underlying data:</p>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" tabindex="-1"></a>px.box(</span>
<span id="cb35-2"><a href="#cb35-2" tabindex="-1"></a>    rodents,</span>
<span id="cb35-3"><a href="#cb35-3" tabindex="-1"></a>    x<span class="op">=</span><span class="st">"genus"</span>,</span>
<span id="cb35-4"><a href="#cb35-4" tabindex="-1"></a>    y<span class="op">=</span><span class="st">"hindfoot_length"</span>,</span>
<span id="cb35-5"><a href="#cb35-5" tabindex="-1"></a>    color<span class="op">=</span><span class="st">"genus"</span>,</span>
<span id="cb35-6"><a href="#cb35-6" tabindex="-1"></a>    color_discrete_sequence<span class="op">=</span>colors,</span>
<span id="cb35-7"><a href="#cb35-7" tabindex="-1"></a>    category_orders<span class="op">=</span>cat_order,</span>
<span id="cb35-8"><a href="#cb35-8" tabindex="-1"></a>    title<span class="op">=</span><span class="st">"Rodent hindfoot length by genus"</span>,</span>
<span id="cb35-9"><a href="#cb35-9" tabindex="-1"></a>    labels<span class="op">=</span>labels,</span>
<span id="cb35-10"><a href="#cb35-10" tabindex="-1"></a>    points<span class="op">=</span><span class="st">"all"</span>,</span>
<span id="cb35-11"><a href="#cb35-11" tabindex="-1"></a>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code></code></pre>
</div>
<embed src="files/fig-5eea0eb0c66c21fc0305194a52809e43.html" width="760" height="570"><p>A point cloud is now visible to the left of each box-and-whisker. We
can see that plotly has spread the points out a bit along the x axis.
This process, called jitter, is necessary because otherwise the points
for each category would fall in a vertical line. We can also see that
we’ve run into the same problem we did above with the scatter plot: The
large number of overlapping points for each box makes it hard to see
what is going on inside each point cloud.</p>
<p>We can again address this problem by changing the opacity of the
markers. It’s a little more complicated than it was for the scatter
plot, however, because the <code>px.box()</code> method does not allow
us to set the marker opacity directly. Instead, we have to build the
plot, then update the existing markers using the
<code>update_traces()</code> method. (Plotly refers to markers, lines,
and other elements as traces.)</p>
<div class="codewrapper sourceCode" id="cb37">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" tabindex="-1"></a>fig <span class="op">=</span> px.box(</span>
<span id="cb37-2"><a href="#cb37-2" tabindex="-1"></a>    rodents,</span>
<span id="cb37-3"><a href="#cb37-3" tabindex="-1"></a>    x<span class="op">=</span><span class="st">"genus"</span>,</span>
<span id="cb37-4"><a href="#cb37-4" tabindex="-1"></a>    y<span class="op">=</span><span class="st">"hindfoot_length"</span>,</span>
<span id="cb37-5"><a href="#cb37-5" tabindex="-1"></a>    color<span class="op">=</span><span class="st">"genus"</span>,</span>
<span id="cb37-6"><a href="#cb37-6" tabindex="-1"></a>    color_discrete_sequence<span class="op">=</span>colors,</span>
<span id="cb37-7"><a href="#cb37-7" tabindex="-1"></a>    category_orders<span class="op">=</span>cat_order,</span>
<span id="cb37-8"><a href="#cb37-8" tabindex="-1"></a>    title<span class="op">=</span><span class="st">"Rodent hindfoot length by genus"</span>,</span>
<span id="cb37-9"><a href="#cb37-9" tabindex="-1"></a>    labels<span class="op">=</span>labels,</span>
<span id="cb37-10"><a href="#cb37-10" tabindex="-1"></a>    points<span class="op">=</span><span class="st">"all"</span>,</span>
<span id="cb37-11"><a href="#cb37-11" tabindex="-1"></a>)</span>
<span id="cb37-12"><a href="#cb37-12" tabindex="-1"></a>fig.update_traces(marker<span class="op">=</span>{<span class="st">"opacity"</span>: <span class="fl">0.1</span>})</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code></code></pre>
</div>
<embed src="files/fig-868351fb9d246f1d5921e6d6b8303f39.html" width="760" height="570"><p>With the points now semitransparent, it is possible to see separate
populations among some genera, like <em>Dipodomys</em>.</p>
<p>Another way to examine the distribution of data is a violin plot,
which visualizes the distribution of points as a line, similar to a Bell
curve. We can change our box plot to a violin plot by swapping
<code>px.violin()</code> in for <code>px.box()</code>:</p>
<div class="codewrapper sourceCode" id="cb39">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" tabindex="-1"></a>fig <span class="op">=</span> px.violin(</span>
<span id="cb39-2"><a href="#cb39-2" tabindex="-1"></a>    rodents,</span>
<span id="cb39-3"><a href="#cb39-3" tabindex="-1"></a>    x<span class="op">=</span><span class="st">"genus"</span>,</span>
<span id="cb39-4"><a href="#cb39-4" tabindex="-1"></a>    y<span class="op">=</span><span class="st">"hindfoot_length"</span>,</span>
<span id="cb39-5"><a href="#cb39-5" tabindex="-1"></a>    color<span class="op">=</span><span class="st">"genus"</span>,</span>
<span id="cb39-6"><a href="#cb39-6" tabindex="-1"></a>    color_discrete_sequence<span class="op">=</span>colors,</span>
<span id="cb39-7"><a href="#cb39-7" tabindex="-1"></a>    category_orders<span class="op">=</span>cat_order,</span>
<span id="cb39-8"><a href="#cb39-8" tabindex="-1"></a>    title<span class="op">=</span><span class="st">"Rodent hindfoot length by genus"</span>,</span>
<span id="cb39-9"><a href="#cb39-9" tabindex="-1"></a>    labels<span class="op">=</span>labels,</span>
<span id="cb39-10"><a href="#cb39-10" tabindex="-1"></a>    points<span class="op">=</span><span class="st">"all"</span>,</span>
<span id="cb39-11"><a href="#cb39-11" tabindex="-1"></a>)</span>
<span id="cb39-12"><a href="#cb39-12" tabindex="-1"></a>fig.update_traces(marker<span class="op">=</span>{<span class="st">"opacity"</span>: <span class="fl">0.1</span>})</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code></code></pre>
</div>
<embed src="files/fig-a2b6e5819ae8ea740baeb7e00455bb9c.html" width="760" height="570"><p>This plot makes it easier to see identify complex distributions, like
the bimodal distribution for <em>Chaetodipus</em>, that are visible but
not necessarily obvious in the point clouds.</p>
<div id="challenge3" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Challenge</h3>
<div class="callout-content">
<p>Let’s return to a question posed all the way back in lesson 2: How
has the weight of <em>Dipodomys</em> species changed over time? Make a
plot that tries to answer this question.</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" data-bs-parent="#accordionSolution3" aria-labelledby="headingSolution3">
<div class="accordion-body">
<p>There are several reasonable approaches to this question using the
scatter plots and boxplots covered so far in this lesson. One
possibility is a faceted plot showing the mean weight of each
<em>Dipodomys</em> over the course of the study.</p>
<div class="codewrapper sourceCode" id="cb41">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" tabindex="-1"></a><span class="co"># Create genus_species column</span></span>
<span id="cb41-2"><a href="#cb41-2" tabindex="-1"></a>rodents[<span class="st">"genus_species"</span>] <span class="op">=</span> rodents[<span class="st">"genus"</span>] <span class="op">+</span> <span class="st">" "</span> <span class="op">+</span> rodents[<span class="st">"species"</span>]</span>
<span id="cb41-3"><a href="#cb41-3" tabindex="-1"></a></span>
<span id="cb41-4"><a href="#cb41-4" tabindex="-1"></a><span class="co"># Limit to Dipodomys</span></span>
<span id="cb41-5"><a href="#cb41-5" tabindex="-1"></a>dipodomys <span class="op">=</span> rodents[rodents[<span class="st">"genus"</span>] <span class="op">==</span> <span class="st">"Dipodomys"</span>].copy()</span>
<span id="cb41-6"><a href="#cb41-6" tabindex="-1"></a></span>
<span id="cb41-7"><a href="#cb41-7" tabindex="-1"></a><span class="co"># Group by genus_species</span></span>
<span id="cb41-8"><a href="#cb41-8" tabindex="-1"></a>grouped <span class="op">=</span> dipodomys.groupby([<span class="st">"genus_species"</span>, <span class="st">"year"</span>])[<span class="st">"weight"</span>].mean().reset_index()</span>
<span id="cb41-9"><a href="#cb41-9" tabindex="-1"></a></span>
<span id="cb41-10"><a href="#cb41-10" tabindex="-1"></a><span class="co"># Create scatter plot</span></span>
<span id="cb41-11"><a href="#cb41-11" tabindex="-1"></a>px.scatter(grouped, x<span class="op">=</span><span class="st">"year"</span>, y<span class="op">=</span><span class="st">"weight"</span>, facet_col<span class="op">=</span><span class="st">"genus_species"</span>)</span></code></pre>
</div>
<p>The plot generated by this code shows that the mean weights for these
species oscillated over the course of the study. Overall, mean weight
increased slightly for the two smaller species but decreased for the
largest species (albeit with a large oscillation that makes determining
a trend difficult.)</p>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul><li>Plotly offers a wide variety of ways to build and style scatter
plots</li>
<li>Use scatter plots to visualize how parameters covary</li>
<li>Use box and violin plots to visualize the distribution of a
parameter</li>
</ul></div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</embed></embed></embed></embed></section></div> <!-- / div.lesson-content -->
    </main><!-- / main#main-content.main-content --><nav class="bottom-pagination mx-md-4" aria-label="Previous and Next Chapter"><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="05-combining-data.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="index.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="05-combining-data.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previous: Combining Dataframes
        </a>
        <a class="chapter-link float-end" href="index.html" rel="next">
          Home
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
    </nav></div> <!-- / div.primary-content.col-xs-12 -->
<!-- END:   inst/pkgdown/templates/content-instructor.html-->

      </div><!--/div.row-->
      		<footer class="row footer mx-md-3"><hr><div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>

        <a href="https://github.com/adamancer/python-ecology-lesson-alt/edit/main/episodes/06-visualizing-data.md" class="external-link">Edit on GitHub</a>

	
        | <a href="https://github.com/adamancer/python-ecology-lesson-alt/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/adamancer/python-ecology-lesson-alt/" class="external-link">Source</a></p>
				<p><a href="https://github.com/adamancer/python-ecology-lesson-alt/blob/main/CITATION" class="external-link">Cite</a> | <a href="mailto:mansura@si.edu">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">

        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>

        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.16.12" class="external-link">sandpaper (0.16.12)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.9" class="external-link">pegboard (0.7.9)</a>, and <a href="https://github.com/carpentries/varnish/tree/1.0.6" class="external-link">varnish (1.0.6)</a></p>
			</div>
		</footer></div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "LearningResource",
  "@id": "https://adamancer.github.io/python-ecology-lesson-alt/06-visualizing-data.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/LearningResource/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "python, pandas, software, data, lesson, The Carpentries",
  "name": "Visualizing Data",
  "creativeWorkStatus": "active",
  "url": "https://adamancer.github.io/python-ecology-lesson-alt/06-visualizing-data.html",
  "identifier": "https://adamancer.github.io/python-ecology-lesson-alt/06-visualizing-data.html",
  "dateCreated": "2022-05-10",
  "dateModified": "2025-07-03",
  "datePublished": "2025-07-03"
}

  </script><script>
		feather.replace();
	</script></body></html><!-- END:   inst/pkgdown/templates/layout.html-->

